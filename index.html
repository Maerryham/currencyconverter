<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/html">
<head>
    <meta charset="UTF-8">
    <title>Andela Currency converter API</title>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
    <link href="https://fonts.googleapis.com/css?family=Poppins|Roboto" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <link rel="stylesheet" href="css/style.css">

    <script src="js/idb.js"></script>
    <script src="js/workwithdb.js"></script>
    <!--<script src="swController.js"></script>-->
    <script src="js/autoRequest.js"></script>

<script>

    if ('serviceWorker' in navigator) {
        window.addEventListener('load', function() {
            navigator.serviceWorker.register('/currencyconverter/sw.js').then(function(registration) {
                // Registration was successful
                console.log('ServiceWorker registration successful with scope: ', registration.scope);
            }, function(err) {
                // registration failed :(
                console.log('ServiceWorker registration failed: ', err);
            });
        });
    }

</script>
</head>
<body>

<!-- Layout-->
<div class="layout">

    <script>

       //The function to convert currencies
        function getDetails() {
            let w = document.getElementById('whatToConvert').value;
            let x = document.getElementById('fromCurrency').value;
            let y = document.getElementById('toCurrency').value;
            let z = document.getElementById('result');
            let query = `${x}_${y}`;
            //alert(query);

            if(w =="" || x =="" || y ==""){
                z.innerHTML = 'Please enter a value to the input';
                return;

            }

            fetch(`https://free.currencyconverterapi.com/api/v5/convert?q=${x}_${y}&compact=ultra`).then(  (response) =>

            response.json()).then((data) => {
               // console.log(data.results);
                //console.log(data.query);//

                let multiplier = data[query];

                let totalresult = multiplier * w;
                //alert(totalresult);
                z.innerHTML = totalresult;
                })

            .catch(error => console.log('error is', error));

        }






    </script>

    <!-- Wrapper-->
    <div class="wrapper">

        <!-- Page Header-->
        <section class="spec-header full-height parallax bg-dark bg-dark-60" data-background="images/spec-11.jpg">
            <div class="container">
                <div class="row">
                    <div class="col-md-12">
                        <div class="col-md-6 mx-auto center">

                            <h1 class="h1 m-b-15">Econvert</h1>
                            <p class="m-b-30">We convert your currency for you</p>
                            <!--<p><a class="btn btn-lg btn-brand" href="#">Contact Us</a></p>-->
                        </div>
                    </div>

                </div>




                           <div class="row">
                               <form method="post" action="#">
                                   <div class="col-md-12 col-sm-12">
                                       Amount
                                       <input id="whatToConvert" name="whatToConvert" type="number" placeholder="Amount to convert" class="form-control input-md" style="width:100%; float: left;" required="">

                                   </div>
                                <div class="col-md-12 col-sm-12">
                                    From
                                    <select class="form-control input-md" name="state" style="width:100%;" id="fromCurrency">

                                        <option value="USD" class="form-control input-md">
                                            USD
                                        </option>

                                    </select>
                                </div>


                                <div class="col-md-12 col-sm-12">
                                    To
                                    <select class="form-control input-md styled-select" style="width:100%;" name="lga" id="toCurrency">

                                        <option value="PHP" class="form-control input-md">
                                            PHP
                                        </option>
                                    </select>
                                </div>



                                <div class="col-md-12 col-sm-12">
                                    <button type="button" class="btn btn-lg btn-brand" onclick="getDetails();"><i class="fa fa-search"></i>Convert</button>

                                </div>
                                   <div class="col-md-12 col-sm-12" id="result" style="color:white">
                                       Output here

                                   </div>

                            </form>
                           </div>





                    </form>




            </div>
        </section>
        <!-- Page Header end-->


        <!-- Services-->
        <section class="spec pb-0">
            <div class="container">
                <div class="row">

                    <div class="col-md-12">
                        <div class="row content-boxes-v3">

                            <div class="col-md-4 clearfix mb-5">
                                <i class="fa fa-bar-chart-o roundedblue"></i>
                                <div class="content-boxes-in-v3">
                                    <div class="icon-box-title my-3">
                                        <h6 class="ml-md-auto col-md-11">Real time</h6>
                                    </div>
                                    <p class="ml-md-auto col-md-11">It implement the latest technology ES6 for real time experience!</p>
                                </div>
                            </div>

                            <div class="col-md-4 clearfix my-5">
                                <i class="fa fa-support roundeddark"></i>
                                <div class="content-boxes-in-v3">
                                    <div class="icon-box-title my-3">
                                        <h6 class="ml-md-auto col-md-11">Offline First</h6>
                                    </div>
                                    <p class="ml-md-auto col-md-11">It implement service worker to answers users request both online and offline</p>
                                </div>
                            </div>

                            <div class="col-md-4 clearfix my-5">
                                <i class="fa fa-envelope roundedblue"></i>
                                <div class="content-boxes-in-v3">
                                    <div class="icon-box-title my-3">
                                        <h6 class="ml-md-auto col-md-11">IndexedDb</h6>
                                    </div>
                                </div>
                                <p class="ml-md-auto col-md-11">It implement IndexedDb for Database storage</p>
                            </div>

                        </div>
                    </div>
                </div>
            </div>
        </section>
        <!-- Services end-->


        <!-- Footer-->
        <footer class="footer">
            <div class="container-indent">
                <div class="row">
                    <div class="col-md-6 col-sm-6 colorLeftFooter">
                        <!-- Text widget-->
                        <aside class="widget widget_text">
                            <div class="textwidget">
                                <div class="spec-title">
                                    <h2>ECONVERT</h2>
                                    <p class="font-serif">Powerful currency converter</p>
                                </div>
                                <p>This Application converts from one currency to another in real time both online and offline <br/>


                            </div>
                        </aside>
                        <img src="images/download.jpg" class="img-circle"  height="93" alt="A">


                    </div>

                </div>
            </div>
            <div class="footer-copyright p-3">
                <div class="container-indent">
                    <div class="row">
                        <div class="col-md-8 footerpadding pt-2" style="padding-left:40px"><span class="copyright">Â© 2018 EConvert, All Rights Reserved. Design by Maerryham for Google Africa Scholarship Project</span>
                        </div>
                        <div class="col-md-4 footerpadding">
                            <div class="container"><span class="copyright">
										<a href="https://twitter.com/maerryham"><i class="socialicons-footer fa fa-twitter"></i></a>
										<a href="https://web.facebook.com/lawalmaerryham.yetundae"><i class="socialicons-footer fa fa-facebook"></i></a>

									</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </footer>
        <!-- Footer end-->

        <a class="scroll-top" href="#top"><i class="fa fa-angle-up"></i></a>
    </div>
    <!-- Wrapper end-->

</div>
<!-- Layout end-->





</body>